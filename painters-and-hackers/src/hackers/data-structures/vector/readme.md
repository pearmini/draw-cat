# 向量（Vector)

看露天电影的时候如何更加优雅地安排座位？

![alt text](https://7765-wechatcloud-79m2p-1259642785.tcb.qcloud.la/algorithms/data-structures/vector/3.png?sign=9de7df125e4385110c1fcb122f031aaf&t=1598836449)

## 引言

露天电影是旧时代一种常见的娱乐方式。小明为了找回童年的记忆，所以准备在广场上举办一场露天电影，但是却在安排座位的时候遇见了困难。

![alt text](https://7765-wechatcloud-79m2p-1259642785.tcb.qcloud.la/algorithms/data-structures/vector/1.png?sign=06beac5270e14334f3ef72001c37273a&t=1598836400)

因为有如下的限制：

- 来看电影的人数不确定
- 租椅子的价格比较贵
- 租椅子的地方离看电影的地方比较远
- 任何两个人之间不能有空位
  
所以小明希望在让来的人都能看上电影的情况下，花相对较少的钱租椅子，同时减少来回搬椅子的次数。

## 解决办法

小明最后想出了一个比较优雅的解决办法。

首先他先放10个椅子在广场上，对于每一个新到来的人，如果椅子不够了，他就去租椅子的地方搬椅子，让现场椅子的数量翻倍。比如现在已经有10个人和10张椅子，这个时候又来了一个人，小明就去租椅子的地方搬10个椅子，这样现场就一共有20个椅子了。

新来的人可以直接坐在最后，也可以插入。如果插入的话，那么在插入位置后面的人就应该依次向后移动。

当每走一个人的时候，如果现在的人数小于等于目前椅子数量的四分之一，小明就去租椅子的地方还椅子，使得现场的椅子减半。比如现在已经有11个人和40张椅子，这个时候走了一个人，小明就去租椅子的地方还20个椅子，这样现场就一共有20个椅子了。

再人走的之后，后面的人应该依次向迁移移动，将空缺补上。

## 向量

其实小明安排椅子的思路就是来源于一种最基本的数据结构：**向量**，它会将元素像一条线一样排列和存储。

上面案例中的椅子对应分配给它的**内存空间**，人对应它存储的**元素**。而椅子的个数和人数分别对应向量中的**容量**和**长度**。

而小明和人们在应对人员变化时候的操作其实就是向量两个最基本的方法。

- 添加元素：在添加元素前首先看容量够不够，如果不够就**扩容**。可以将元素添加到末尾，也可以插入，在插入元素后，应将插入位置后面的元素依次后移。
- 删除元素：在删除元素前首先看容量是否过分冗余，如果是就**缩容**。同时在删除元素后，将删除位置后面的元素依次向前移动。

## 可视化

下面网格中每一行都是一个向量，黑色边框的格子代表的是向量的容量，有颜色的格子代表的是向量的元素。

![alt text](https://7765-wechatcloud-79m2p-1259642785.tcb.qcloud.la/algorithms/data-structures/vector/2.png?sign=4d5dec4001e46385bf26d8350c501368&t=1598836415)

在可视化向量的过程中，会随机对向量元素进行添加、插入和删除操作，在这个过程中可以观察到元素的移动和向量的容量的动态变化。

![alt text](https://7765-wechatcloud-79m2p-1259642785.tcb.qcloud.la/algorithms/data-structures/vector/1.gif?sign=a5e9fdae371ddff0c9d63550c111f9ce&t=1598836385)
